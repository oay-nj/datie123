"use strict";const e=require("../../common/vendor.js"),t=require("../../model/entryModel.js"),a=require("../../common/assets.js"),n={components:{horizontalScroller:()=>"../../components/horizontal-scroller.js"},computed:{filterGameList(){let e=this.gameRank2[this.gameRank2Index],t=this.gameRank3selected,a=this.gameRank4selected;return this.gameList.filter((n=>a.length>0?n.rank2===e&&n.rank3===t&&n.rank4===a:n.rank2===e&&n.rank3===t))},filterGearList(){let e=this.gearRank2[this.gearRank2Index],t=this.gearRank3selected,a=this.gearRank4selected;return this.gearList.filter((n=>a.length>0?n.rank2===e&&n.rank3===t&&n.rank4===a:n.rank2===e&&n.rank3===t))},filterTeamList(){let e=this.teamRank2[this.teamRank2Index],t=this.teamRank3selected,a=this.teamRank4selected;return this.teamList.filter((n=>a.length>0?n.rank2===e&&n.rank3===t&&n.rank4===a:n.rank2===e&&n.rank3===t))}},data:()=>({array:[{type:"铁人三项"}],typeIndex:0,articleList:[],gameHierarchy:{},gameRank2:[],gameRank2Index:0,gameRank3:[],gameRank3selected:"",gameRank4:[],gameRank4selected:"",gameList:[],gearHierarchy:{},gearRank2:[],gearRank2Index:0,gearRank3:[],gearRank3selected:"",gearRank4:[],gearRank4selected:"",gearList:[],teamHierarchy:{},teamRank2:[],teamRank2Index:0,teamRank3:[],teamRank3selected:"",teamRank4:[],teamRank4selected:"",teamList:[]}),onReady(){this.queryDicList(),this.queryGearDicList(),this.queryTeamDicList(),this.queryArticleList()},methods:{showDrawer(){this.$refs.showLeft.open()},closeDrawer(){this.$refs.showLeft.close()},bindPickerChange:function(e){},bindGameRank2PickerChange:function(e){this.gameRank2Index=e.detail.value;let t=this.gameRank2[this.gameRank2Index];if(null!=t){let e=this.getRank2Sublist(this.gameHierarchy,"赛事",t);this.gameRank3=Object.keys(e),this.gameRank3selected=this.gameRank3[0]||""}this.queryGameData()},bindGearRank2PickerChange:function(e){this.gearRank2Index=e.detail.value;let t=this.gearRank2[this.gearRank2Index];if(null!=t){let e=this.getRank2Sublist(this.gearHierarchy,"装备",t);this.gearRank3=Object.keys(e),this.gearRank3selected=this.gearRank3[0]||""}this.queryGearData()},bindTeamRank2PickerChange:function(e){this.teamRank2Index=e.detail.value;let t=this.teamRank2[this.teamRank2Index];if(null!=t){let e=this.getRank2Sublist(this.teamHierarchy,"团体",t);this.teamRank3=Object.keys(e),this.teamRank3selected=this.teamRank3[0]||""}this.queryTeamData()},handleTabSelected(e){console.log("选中的标签:",JSON.stringify(e))},onSelectGameRank4(e){this.gameRank4selected=e},onSelectGearRank4(e){this.gearRank4selected=e},onSelectTeamRank4(e){this.teamRank4selected=e},handleGameRank3Selected(e){this.gameRank3selected=e;let t=this.gameRank2[this.gameRank2Index],a=this.getRank3Sublist(this.gameHierarchy,"赛事",t,e);this.gameRank4=a},handleGearRank3Selected(e){this.gearRank3selected=e;let t=this.gearRank2[this.gearRank2Index],a=this.getRank3Sublist(this.gearHierarchy,"装备",t,e);this.gearRank4=a},handleTeamRank3Selected(e){this.teamRank3selected=e;let t=this.teamRank2[this.teamRank2Index],a=this.getRank3Sublist(this.teamHierarchy,"团体",t,e);this.teamRank4=a},onClickDetailItem(t){let a=t.link_main;e.index.navigateTo({url:"/pages/news/detail?query="+encodeURIComponent(a)})},onClickGearDetailItem(t){let a=t.link_main;e.index.navigateTo({url:"/pages/news/detail?query="+encodeURIComponent(a)})},onClickTeamDetailItem(t){let a=t.link_main;e.index.navigateTo({url:"/pages/news/detail?query="+encodeURIComponent(a)})},queryArticleList(){e.index.request({url:"https://datie123.com/entry/getEntryList",method:"GET",data:{sport_type:"铁人三项",rank1:"文章",order_type:"1"}}).then((e=>{if(200===e.statusCode){let a=[],n=e.data;if(0==n.code){let e=n.entry_list;for(let n of e){let e=t.EntryModel.fromJSON(n);a.push(e)}}this.articleList=a}}))},queryGameData(){let a=this.array[this.typeIndex].type,n=this.gameRank2[this.gameRank2Index];const i=(t="")=>e.index.request({url:"https://datie123.com/entry/getEntryList",method:"GET",data:{sport_type:a,rank1:"赛事",rank2:n,order_type:"1",entry_id:t}});i().then((e=>{if(200===e.statusCode){let a=[],n=e.data;if(0==n.code){let e=n.entry_list;for(let n of e){let e=t.EntryModel.fromJSON(n);a.push(e)}if(a.length>0&&a.length<160){const e=a[a.length-1].entry_id;i(e).then((e=>{if(200===e.statusCode){let n=e.data;if(0==n.code){let e=n.entry_list;for(let n of e){let e=t.EntryModel.fromJSON(n);a.push(e)}}this.gameList=a.slice(0,160)}}))}else this.gameList=a}}}))},queryGearData(){e.index.showLoading({title:"加载中...",mask:!0});let a=this.array[this.typeIndex].type,n=this.gearRank2[this.gearRank2Index];const i=(t="")=>e.index.request({url:"https://datie123.com/entry/getEntryList",method:"GET",data:{sport_type:a,rank1:"装备",rank2:n,order_type:"1",entry_id:t}});i().then((a=>{if(200===a.statusCode){let n=[],r=a.data;if(0==r.code){let a=r.entry_list;for(let e of a){let a=t.EntryModel.fromJSON(e);n.push(a)}if(n.length>0&&n.length<240){const a=n[n.length-1].entry_id;i(a).then((a=>{if(200===a.statusCode){let e=a.data;if(0==e.code){let a=e.entry_list;for(let e of a){let a=t.EntryModel.fromJSON(e);n.push(a)}}this.gearList=n.slice(0,240)}e.index.hideLoading()})).catch((()=>{e.index.hideLoading()}))}else this.gearList=n,e.index.hideLoading()}else e.index.hideLoading()}else e.index.hideLoading()})).catch((()=>{e.index.hideLoading()}))},queryTeamData(){let a=this.array[this.typeIndex].type,n=this.teamRank2[this.teamRank2Index];const i=(t="")=>e.index.request({url:"https://datie123.com/entry/getEntryList",method:"GET",data:{sport_type:a,rank1:"团体",rank2:n,order_type:"1",entry_id:t}});i().then((e=>{if(200===e.statusCode){let a=[],n=e.data;if(0==n.code){let e=n.entry_list;for(let n of e){let e=t.EntryModel.fromJSON(n);a.push(e)}if(a.length>0&&a.length<200){const e=a[a.length-1].entry_id;i(e).then((e=>{if(200===e.statusCode){let n=e.data;if(0==n.code){let e=n.entry_list;for(let n of e){let e=t.EntryModel.fromJSON(n);a.push(e)}}this.teamList=a.slice(0,200)}}))}else this.teamList=a}}}))},queryTeamDicList(){e.index.request({url:"https://datie123.com/entry/getRankList",method:"GET",data:{rank1:"团体"}}).then((e=>{let t=e.data;if(0==t.code){let e=t.rank_list,a=this.buildHierarchy(e);this.teamHierarchy=a;let n=this.getRank1Sublist(a,"团体");this.teamRank2=Object.keys(n);let i=this.teamRank2[this.teamRank2Index];if(null!=i){let e=this.getRank2Sublist(a,"团体",i);if(this.teamRank3=Object.keys(e),this.teamRank3.length>0){let e=this.teamRank3[0];if(this.teamRank3selected=e,null!=e){let t=this.getRank3Sublist(a,"团体",i,e);this.teamRank4=t}}}this.queryTeamData()}}))},queryGearDicList(){e.index.request({url:"https://datie123.com/entry/getRankList",method:"GET",data:{rank1:"装备"}}).then((e=>{let t=e.data;if(0==t.code){let e=t.rank_list,a=this.buildHierarchy(e);this.gearHierarchy=a;let n=this.getRank1Sublist(a,"装备");this.gearRank2=Object.keys(n);let i=this.gearRank2[this.gearRank2Index];if(null!=i){let e=this.getRank2Sublist(a,"装备",i);if(this.gearRank3=Object.keys(e),this.gearRank3.length>0){let e=this.gearRank3[0];if(this.gearRank3selected=e,null!=e){let t=this.getRank3Sublist(a,"装备",i,e);this.gearRank4=t}}}this.queryGearData()}}))},queryDicList(){e.index.request({url:"https://datie123.com/entry/getRankList",method:"GET",data:{rank1:"赛事"}}).then((e=>{console.log("EEEEEE",e);let t=e.data;if(0==t.code){let e=t.rank_list,a=this.buildHierarchy(e);this.gameHierarchy=a;let n=this.getRank1Sublist(a,"赛事");this.gameRank2=Object.keys(n);let i=this.gameRank2[this.gameRank2Index];if(null!=i){let e=this.getRank2Sublist(a,"赛事",i);if(this.gameRank3=Object.keys(e),this.gameRank3.length>0){let e=this.gameRank3[0];if(this.gameRank3selected=e,null!=e){let t=this.getRank3Sublist(a,"赛事",i,e);this.gameRank4=t}}}this.queryGameData()}}))},buildHierarchy(e){const t={};return e.forEach((e=>{t[e.rank1]||(t[e.rank1]={}),void 0!==e.rank2&&(t[e.rank1][e.rank2]||(t[e.rank1][e.rank2]={}),void 0!==e.rank3&&(t[e.rank1][e.rank2][e.rank3]||(t[e.rank1][e.rank2][e.rank3]=[]),void 0!==e.rank4&&t[e.rank1][e.rank2][e.rank3].push(e.rank4)))})),t},getRank1Sublist:(e,t)=>e[t]||{},getRank2Sublist:(e,t,a)=>e[t]&&e[t][a]||[],getRank3Sublist:(e,t,a,n)=>e[t]&&e[t][a]&&e[t][a][n]||[],openBeianLink(){},scrollToSection(e){this.closeDrawer()}}};if(!Array){(e.resolveComponent("uni-icons")+e.resolveComponent("uni-nav-bar")+e.resolveComponent("uni-drawer")+e.resolveComponent("uni-grid-item")+e.resolveComponent("uni-grid")+e.resolveComponent("uni-card")+e.resolveComponent("horizontalScroller")+e.resolveComponent("uni-tag"))()}Math||((()=>"../../uni_modules/uni-icons/components/uni-icons/uni-icons.js")+(()=>"../../uni_modules/uni-nav-bar/components/uni-nav-bar/uni-nav-bar.js")+(()=>"../../uni_modules/uni-drawer/components/uni-drawer/uni-drawer.js")+(()=>"../../uni_modules/uni-grid/components/uni-grid-item/uni-grid-item.js")+(()=>"../../uni_modules/uni-grid/components/uni-grid/uni-grid.js")+(()=>"../../uni_modules/uni-card/components/uni-card/uni-card.js")+(()=>"../../uni_modules/uni-tag/components/uni-tag/uni-tag.js"))();const i=e._export_sfc(n,[["render",function(t,n,i,r,s,o){return{a:a._imports_0,b:e.o(((...e)=>o.showDrawer&&o.showDrawer(...e))),c:a._imports_1,d:e.t(s.array[s.typeIndex].type),e:e.o(((...e)=>o.bindPickerChange&&o.bindPickerChange(...e))),f:s.typeIndex,g:s.array,h:e.p({type:"down"}),i:a._imports_1,j:e.p({type:"email"}),k:e.o((e=>o.scrollToSection("article"))),l:e.p({type:"person"}),m:e.o((e=>o.scrollToSection("game"))),n:e.p({type:"person"}),o:e.o((e=>o.scrollToSection("gear"))),p:e.p({type:"person"}),q:e.o((e=>o.scrollToSection("team"))),r:e.sr("showLeft","2c631290-2"),s:e.p({mode:"left","mask-click":!0}),t:a._imports_2,v:e.f(s.articleList,((t,a,n)=>({a:e.t(t.title),b:a,c:e.o((e=>o.onClickDetailItem(t)),a),d:"2c631290-9-"+n+",2c631290-8"}))),w:e.p({column:2,showBorder:!1,square:!1}),x:e.p({id:"article",title:"文章"}),y:a._imports_3,z:e.t(s.gameRank2[s.gameRank2Index]),A:a._imports_4,B:e.o(((...e)=>o.bindGameRank2PickerChange&&o.bindGameRank2PickerChange(...e))),C:s.gameRank2Index,D:s.gameRank2,E:e.o(o.handleGameRank3Selected),F:e.p({tabs:s.gameRank3}),G:e.f(s.gameRank4,((t,a,n)=>({a:a,b:e.o((e=>o.onSelectGameRank4(t)),a),c:"2c631290-12-"+n+",2c631290-10",d:e.p({text:t,"custom-style":t===s.gameRank4selected?"background-color: #FBE7E9; border: none; color: #CE2C32":"background-color: #EFEFEF; border: none; color: #333333"})}))),H:e.f(o.filterGameList,((t,a,n)=>({a:e.t(t.title),b:"2c631290-15-"+n+",2c631290-14-"+n,c:e.p({"custom-style":"background-color: #EFEFEF; border-color: #CE2C32; color: #CE2C32;",text:t.brand}),d:"2c631290-16-"+n+",2c631290-14-"+n,e:e.p({"custom-style":"background-color: #EFEFEF; border-color: #CE2C32; color: #CE2C32;",text:t.area}),f:a,g:e.o((e=>o.onClickDetailItem(t)),a),h:"2c631290-14-"+n+",2c631290-13"}))),I:e.p({column:2,showBorder:!1,square:!1}),J:e.p({id:"game",title:"赛事"}),K:a._imports_5,L:e.t(s.gearRank2[s.gearRank2Index]),M:a._imports_4,N:e.o(((...e)=>o.bindGearRank2PickerChange&&o.bindGearRank2PickerChange(...e))),O:s.gearRank2Index,P:s.gearRank2,Q:e.o(o.handleGearRank3Selected),R:e.p({tabs:s.gearRank3}),S:e.f(s.gearRank4,((t,a,n)=>({a:a,b:e.o((e=>o.onSelectGearRank4(t)),a),c:"2c631290-19-"+n+",2c631290-17",d:e.p({text:t,"custom-style":t===s.gearRank4selected?"background-color: #FBE7E9; border: none; color: #CE2C32":"background-color: #EFEFEF; border: none; color: #333333"})}))),T:e.f(o.filterGearList,((t,a,n)=>({a:t.icon,b:e.t(t.brand),c:e.t(t.title),d:a,e:e.o((e=>o.onClickGearDetailItem(t)),a),f:"2c631290-21-"+n+",2c631290-20"}))),U:e.p({column:2,showBorder:!1,square:!1}),V:e.p({id:"gear",title:"装备"}),W:a._imports_6,X:e.t(s.teamRank2[s.teamRank2Index]),Y:a._imports_4,Z:e.o(((...e)=>o.bindTeamRank2PickerChange&&o.bindTeamRank2PickerChange(...e))),aa:s.teamRank2Index,ab:s.teamRank2,ac:e.o(o.handleTeamRank3Selected),ad:e.p({tabs:s.teamRank3}),ae:e.f(s.teamRank4,((t,a,n)=>({a:a,b:e.o((e=>o.onSelectTeamRank4(t)),a),c:"2c631290-24-"+n+",2c631290-22",d:e.p({text:t,"custom-style":t===s.teamRank4selected?"background-color: #FBE7E9; border: none; color: #CE2C32":"background-color: #EFEFEF; border: none; color: #333333"})}))),af:e.f(o.filterTeamList,((t,a,n)=>({a:e.t(t.title),b:a,c:e.o((e=>o.onClickTeamDetailItem(t)),a),d:"2c631290-26-"+n+",2c631290-25"}))),ag:a._imports_7,ah:e.p({column:2,showBorder:!1,square:!1}),ai:e.p({id:"team",title:"团队"}),aj:e.o(((...e)=>o.openBeianLink&&o.openBeianLink(...e)))}}]]);wx.createPage(i);
