{"version":3,"file":"detail.js","sources":["pages/news/detail.nvue","pages/news/detail.nvue?type=page"],"sourcesContent":["<template>\n\t<view class=\"box-bg\">\n\t\t<view class=\"custom-navigation\" :style=\"{ top: statusBarHeight + 'px' }\">\n\t\t\t<view class=\"nav-back\" @click=\"navigateBack\">\n\t\t\t\t<view style=\"flex-direction: row; align-items: center;\">\n\t\t\t\t\t<uni-icons type=\"back\" size=\"24\" color=\"#000000\"></uni-icons>\n\t\t\t\t\t<text class=\"back-text\">返回</text>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t<view class=\"nav-title\">\n\t\t\t\t<text class=\"title-text\">{{pageTitle}}</text>\n\t\t\t</view>\n\t\t</view>\n\t\t<view class=\"content\" :style=\"{ paddingTop: (statusBarHeight + 44) + 'px' }\">\n\t\t\t<web-view \n\t\t\t\tclass=\"webview-box\" \n\t\t\t\t:src=\"url\" \n\t\t\t\t@onPostMessage=\"handlePostMessage\"\n\t\t\t></web-view>\n\t\t</view>\n\t</view>\n</template>\n\n<script>\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\turl: 'about:blank',\n\t\t\tpageTitle: '',\n\t\t\tstatusBarHeight: 20\n\t\t}\n\t},\n\tonLoad(event) {\n\t\t// 获取状态栏高度\n\t\tthis.statusBarHeight = uni.getSystemInfoSync().statusBarHeight;\n\t\t\n\t\t// 检查和处理 URL\n\t\tif(event.query\t) {\n\t\t\ttry {\n\t\t\t\tthis.url = decodeURIComponent(event.query);\n\t\t\t\tconsole.log('Loading URL:', this.url);\n\t\t\t\t\n\t\t\t\tif (!this.url.startsWith('http://') && !this.url.startsWith('https://')) {\n\t\t\t\t\tthis.url = 'https://' + this.url;\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error('URL decode error:', e);\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: 'URL格式错误',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t});\n\t\t\t}\n\t\t} else {\n\t\t\tconsole.error('No URL provided');\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '未提供URL',\n\t\t\t\ticon: 'none'\n\t\t\t});\n\t\t}\n\t\t\n\t\tif(event.title) {\n\t\t\tthis.pageTitle = decodeURIComponent(event.title);\n\t\t}\n\t},\n\tmethods: {\n\t\tnavigateBack() {\n\t\t\tuni.navigateBack();\n\t\t},\n\t\thandlePostMessage(event) {\n\t\t\tconsole.log('PostMessage received:', event.detail);\n\t\t\tif(event.detail.data && event.detail.data.title) {\n\t\t\t\t// 如果从postMessage获取到标题就使用,否则尝试从网页标题获取\n\t\t\t\tif (event.detail.data.title) {\n\t\t\t\t\tthis.pageTitle = event.detail.data.title;\n\t\t\t\t} else {\n\t\t\t\t\t// 通过webview获取网页标题\n\t\t\t\t\tconst webview = this.$refs.webview;\n\t\t\t\t\tif (webview) {\n\t\t\t\t\t\twebview.evaluate('document.title', (result) => {\n\t\t\t\t\t\t\tif (result) {\n\t\t\t\t\t\t\t\tthis.pageTitle = result;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n</script>\n\n<style>\n.box-bg {\n\tflex: 1;\n\tposition: relative;\n\twidth: 750rpx;\n\theight: 100vh;\n\tbackground-color: #ffffff;\n}\n\n.content {\n\tflex: 1;\n\twidth: 750rpx;\n\theight: 100vh;\n\tbackground-color: #ffffff;\n}\n\n.webview-box {\n\tflex: 1;\n\twidth: 750rpx;\n\theight: calc(100vh - 44px - var(--status-bar-height));\n}\n\n.custom-navigation {\n\tposition: fixed;\n\tleft: 0;\n\tright: 0;\n\theight: 44px;\n\tz-index: 999;\n\tdisplay: flex;\n\tflex-direction: row;\n\talign-items: center;\n\tbackground-color: #ffffff;\n\tpadding: 0 15px;\n\tbox-shadow: 0 1px 5px rgba(0, 0, 0, 0.1);\n}\n\n.nav-back {\n\tdisplay: flex;\n\talign-items: center;\n\tpadding: 8px;\n}\n\n.back-icon {\n\twidth: 20px;\n\theight: 20px;\n}\n\n.back-text {\n\tfont-size: 16px;\n\tcolor: #333;\n\tmargin-left: 4px;\n}\n\n.nav-title {\n\tflex: 1;\n\ttext-align: center;\n}\n\n.title-text {\n\tfont-size: 18px;\n\tcolor: #333;\n\tfont-weight: 500;\n}\n</style>\n","import MiniProgramPage from '/Users/zzj/Documents/HBuilderProjects/datie123/pages/news/detail.nvue'\nwx.createPage(MiniProgramPage)"],"names":["uni"],"mappings":";;AAwBA,MAAK,YAAU;AAAA,EACd,OAAO;AACN,WAAO;AAAA,MACN,KAAK;AAAA,MACL,WAAW;AAAA,MACX,iBAAiB;AAAA,IAClB;AAAA,EACA;AAAA,EACD,OAAO,OAAO;AAEb,SAAK,kBAAkBA,cAAAA,MAAI,kBAAiB,EAAG;AAG/C,QAAG,MAAM,OAAQ;AAChB,UAAI;AACH,aAAK,MAAM,mBAAmB,MAAM,KAAK;AACzCA,sBAAA,MAAA,MAAA,OAAA,gCAAY,gBAAgB,KAAK,GAAG;AAEpC,YAAI,CAAC,KAAK,IAAI,WAAW,SAAS,KAAK,CAAC,KAAK,IAAI,WAAW,UAAU,GAAG;AACxE,eAAK,MAAM,aAAa,KAAK;AAAA,QAC9B;AAAA,MACD,SAAS,GAAG;AACXA,sBAAc,MAAA,MAAA,SAAA,gCAAA,qBAAqB,CAAC;AACpCA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,QACP,CAAC;AAAA,MACF;AAAA,WACM;AACNA,oBAAAA,MAAc,MAAA,SAAA,gCAAA,iBAAiB;AAC/BA,oBAAAA,MAAI,UAAU;AAAA,QACb,OAAO;AAAA,QACP,MAAM;AAAA,MACP,CAAC;AAAA,IACF;AAEA,QAAG,MAAM,OAAO;AACf,WAAK,YAAY,mBAAmB,MAAM,KAAK;AAAA,IAChD;AAAA,EACA;AAAA,EACD,SAAS;AAAA,IACR,eAAe;AACdA,oBAAG,MAAC,aAAY;AAAA,IAChB;AAAA,IACD,kBAAkB,OAAO;AACxBA,oBAAA,MAAA,MAAA,OAAA,gCAAY,yBAAyB,MAAM,MAAM;AACjD,UAAG,MAAM,OAAO,QAAQ,MAAM,OAAO,KAAK,OAAO;AAEhD,YAAI,MAAM,OAAO,KAAK,OAAO;AAC5B,eAAK,YAAY,MAAM,OAAO,KAAK;AAAA,eAC7B;AAEN,gBAAM,UAAU,KAAK,MAAM;AAC3B,cAAI,SAAS;AACZ,oBAAQ,SAAS,kBAAkB,CAAC,WAAW;AAC9C,kBAAI,QAAQ;AACX,qBAAK,YAAY;AAAA,cAClB;AAAA,YACD,CAAC;AAAA,UACF;AAAA,QACD;AAAA,MACD;AAAA,IACD;AAAA,EACD;AACD;;;;;;;;;;;;;;;;;;;;;;;;;ACvFA,GAAG,WAAW,eAAe;"}